# Инструкция по запуску автотестов в Postman

## Предварительные требования
- Установленный Postman (версия 8.0+)
- Доступ к API серверу Avito
- Базовое понимание работы Postman

## Шаг 1: Импорт коллекции

1. **Создайте файл коллекции**:
   - Создайте новый файл с именем `QA_Avito_test.postman_collection.json`
   - Скопируйте содержимое предоставленного JSON файла в созданный файл

2. **Импортируйте коллекцию в Postman**:
   - Откройте Postman
   - Нажмите `File` → `Import` (или кнопку Import в левом верхнем углу)
   - Перетащите файл в окно импорта или выберите через `Upload Files`
   - Нажмите `Import`

## Шаг 2: Настройка переменных коллекции

Все переменные коллекции уже импортировались

## Шаг 3: Запуск всех тестов через Collection Runner

### Автоматический запуск (рекомендуемый способ)

1. **Откройте Collection Runner**:
- Наведите курсор на коллекцию `QA_Avito_test`
- Нажмите на три точки `...`
- Выберите `Run`

ИЛИ

- Нажмите на коллекцию `QA_Avito_test`
- Перейдите на вкладку `Run`

2. **Настройте параметры запуска**:
- Оставьте порядок запросов по умолчанию (важен для корректной работы)
- При необходимости установите задержку между запросами (0-1000 мс)

3. **Запустите выполнение**:
- Нажмите кнопку `Run QA_Avito_test`
- Наблюдайте за прогрессом выполнения в реальном времени

### Ручной запуск (по одному запросу)

1. **Откройте нужный запрос** в коллекции
2. **Нажмите кнопку `Send`**
3. **Проверьте результаты** во вкладке `Test Results`

## Шаг 4: Анализ результатов

### В Collection Runner вы увидите:

- **Общий статус выполнения** - процент пройденных тестов
- **Детали по каждому запросу**:
- ✅ Зеленый кружок - тест пройден
- ❌ Красный кружок - тест не пройден
- Время выполнения каждого запроса

### Ключевые метрики:

- **Passed** - количество пройденных тестов
- **Failed** - количество упавших тестов
- **Total requests** - общее количество выполненных запросов

## Шаг 5: Просмотр детальной информации

1. **Для просмотра логов**:
- Откройте Console в Postman (Ctrl+Alt+C)
- Видите все выполненные запросы и ответы

2. **Для просмотра сохраненных переменных**:
- Проверьте значение `itemID` в переменных коллекции после выполнения тестов

## Структура тестов

### Группы тестов в коллекции:

1. **Создание объявления**
- Сохранить объявление с валидными данными
- SellerID отсутствует
- sellerID неверного типа
- Отсутствует name
- Отсутствует price
- Statistics неверного формата

2. **Получить объявление по id**
- Получение объявления по существующему id
- ID отсутствует
- Неверный формат ID
- ID не передано

3. **Получить все объявления продавца**
- Запрос списка объявлений корректного продавца
- sellerID не существует
- sellerID неверного формата

4. **Получить статистику объявления**
- Успешное получение статистики
- ID не существует
- ID неверного формата

## Важные замечания

### Порядок выполнения:
Тесты выполняются в строгом порядке:
1. Создание объявления (сохраняет `itemID`)
2. Получение объявления по ID (использует `itemID`)
3. Получение всех объявлений продавца
4. Получение статистики объявления

### Переменные:
- `itemID` автоматически сохраняется после успешного создания объявления
- Для повторного запуска может потребоваться сброс переменных или очистка данных на сервере

## Возможные проблемы и решения

| Проблема | Решение |
|----------|---------|
| "Variables not set" | Проверьте заполнение переменных в окружении |
| "Connection refused" | Убедитесь, что сервер доступен по `baseUrl` |
| "404 Not Found" | Проверьте корректность `baseUrl` и путь к API |
| Тесты падают на создании объявления | Проверьте, что `sellerID` существует в системе |
| "itemID not found" | Запустите коллекцию с начала, не пропуская первый запрос |
| Ошибки валидации | Проверьте формат отправляемых данных в теле запроса |

## Дополнительные возможности

- **Экспорт результатов**: В Collection Runner можно экспортировать результаты в JSON
- **Повторный запуск**: Для повторного запуска конкретных тестов используйте кнопку `Retry`
- **Настройка итераций**: Можно настроить multiple iterations для нагрузочного тестирования
- **Генерация отчетов**: Используйте Newman для генерации отчетов в CI/CD

## Советы по работе

1. **Перед первым запуском**: Убедитесь, что все переменные коллекции заполнены корректно
2. **При повторных запусках**: Может потребоваться очистка данных на сервере или сброс переменной `itemID`
3. **Для отладки**: Используйте консоль Postman для просмотра деталей запросов и ответов
4. **При изменении тестов**: Сохраняйте изменения в коллекции через `Ctrl+S`

После успешного выполнения вы получите полный отчет о работе API с автоматической проверкой всех сценариев.

## Поддержка

Если возникли проблемы с запуском тестов:
1. Проверьте предварительные требования
2. Убедитесь в корректности переменных окружения
3. Проверьте доступность API сервера
4. Просмотрите логи в консоли Postman для детальной информации об ошибках
